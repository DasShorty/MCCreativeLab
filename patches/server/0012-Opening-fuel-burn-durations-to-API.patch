From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: derverdox <lukasjonsson@outlook.de>
Date: Fri, 17 Nov 2023 19:02:10 +0100
Subject: [PATCH] Opening fuel burn durations to API


diff --git a/src/main/java/net/minecraft/world/level/block/entity/AbstractFurnaceBlockEntity.java b/src/main/java/net/minecraft/world/level/block/entity/AbstractFurnaceBlockEntity.java
index a18aadbf7ae83713e1f2b21553185d8000bc7699..eacd7eb15d2d2000da20b335af02b89f57f41d99 100644
--- a/src/main/java/net/minecraft/world/level/block/entity/AbstractFurnaceBlockEntity.java
+++ b/src/main/java/net/minecraft/world/level/block/entity/AbstractFurnaceBlockEntity.java
@@ -2,6 +2,7 @@ package net.minecraft.world.level.block.entity;
 
 import com.google.common.collect.Lists;
 import com.google.common.collect.Maps;
+import de.verdox.mccreativelab.behaviour.FuelBurnBehaviour;
 import it.unimi.dsi.fastutil.objects.Object2IntMap.Entry;
 import it.unimi.dsi.fastutil.objects.Object2IntOpenHashMap;
 import it.unimi.dsi.fastutil.objects.ObjectIterator;
@@ -478,6 +479,8 @@ public abstract class AbstractFurnaceBlockEntity extends BaseContainerBlockEntit
     }
 
     protected int getBurnDuration(ItemStack fuel) {
+        if(FuelBurnBehaviour.FUEL_BURN_BEHAVIOUR.isImplemented())
+            return FuelBurnBehaviour.FUEL_BURN_BEHAVIOUR.getBehaviour().calculateFurnaceBurnDuration(CraftItemStack.asCraftMirror(fuel));
         if (fuel.isEmpty()) {
             return 0;
         } else {
diff --git a/src/main/java/net/minecraft/world/level/block/entity/BlastFurnaceBlockEntity.java b/src/main/java/net/minecraft/world/level/block/entity/BlastFurnaceBlockEntity.java
index fb4f57b2ed17ff9b4853e1ba2aac7a002989e5c8..e29b91299cffac092b93573d8f2220430de1332a 100644
--- a/src/main/java/net/minecraft/world/level/block/entity/BlastFurnaceBlockEntity.java
+++ b/src/main/java/net/minecraft/world/level/block/entity/BlastFurnaceBlockEntity.java
@@ -1,5 +1,6 @@
 package net.minecraft.world.level.block.entity;
 
+import de.verdox.mccreativelab.behaviour.FuelBurnBehaviour;
 import net.minecraft.core.BlockPos;
 import net.minecraft.network.chat.Component;
 import net.minecraft.world.entity.player.Inventory;
@@ -8,6 +9,7 @@ import net.minecraft.world.inventory.BlastFurnaceMenu;
 import net.minecraft.world.item.ItemStack;
 import net.minecraft.world.item.crafting.RecipeType;
 import net.minecraft.world.level.block.state.BlockState;
+import org.bukkit.craftbukkit.inventory.CraftItemStack;
 
 public class BlastFurnaceBlockEntity extends AbstractFurnaceBlockEntity {
     public BlastFurnaceBlockEntity(BlockPos pos, BlockState state) {
@@ -21,6 +23,8 @@ public class BlastFurnaceBlockEntity extends AbstractFurnaceBlockEntity {
 
     @Override
     protected int getBurnDuration(ItemStack fuel) {
+        if(FuelBurnBehaviour.FUEL_BURN_BEHAVIOUR.isImplemented())
+            return FuelBurnBehaviour.FUEL_BURN_BEHAVIOUR.getBehaviour().calculateBlastFurnaceDuration(CraftItemStack.asCraftMirror(fuel));
         return super.getBurnDuration(fuel) / 2;
     }
 
diff --git a/src/main/java/net/minecraft/world/level/block/entity/SmokerBlockEntity.java b/src/main/java/net/minecraft/world/level/block/entity/SmokerBlockEntity.java
index 7d9548f89fda9f4ba203d95d6e64826e9a697013..1f0632871a6b5282c6a522ea13262c83a35f82cc 100644
--- a/src/main/java/net/minecraft/world/level/block/entity/SmokerBlockEntity.java
+++ b/src/main/java/net/minecraft/world/level/block/entity/SmokerBlockEntity.java
@@ -1,5 +1,6 @@
 package net.minecraft.world.level.block.entity;
 
+import de.verdox.mccreativelab.behaviour.FuelBurnBehaviour;
 import net.minecraft.core.BlockPos;
 import net.minecraft.network.chat.Component;
 import net.minecraft.world.entity.player.Inventory;
@@ -8,6 +9,7 @@ import net.minecraft.world.inventory.SmokerMenu;
 import net.minecraft.world.item.ItemStack;
 import net.minecraft.world.item.crafting.RecipeType;
 import net.minecraft.world.level.block.state.BlockState;
+import org.bukkit.craftbukkit.inventory.CraftItemStack;
 
 public class SmokerBlockEntity extends AbstractFurnaceBlockEntity {
     public SmokerBlockEntity(BlockPos pos, BlockState state) {
@@ -21,6 +23,8 @@ public class SmokerBlockEntity extends AbstractFurnaceBlockEntity {
 
     @Override
     protected int getBurnDuration(ItemStack fuel) {
+        if(FuelBurnBehaviour.FUEL_BURN_BEHAVIOUR.isImplemented())
+            return FuelBurnBehaviour.FUEL_BURN_BEHAVIOUR.getBehaviour().calculateSmokerBurnDuration(CraftItemStack.asCraftMirror(fuel));
         return super.getBurnDuration(fuel) / 2;
     }
 
